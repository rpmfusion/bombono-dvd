From 2d72b907a81aa6a96bffaeabd78a1d546891e97d Mon Sep 17 00:00:00 2001
From: Ilya Murav'jov <muravev@yandex.ru>
Date: Sat, 9 Apr 2016 12:17:56 +0300
Subject: [PATCH 06/12] fix for old ffmpeg

---
 src/mgui/ffviewer.cpp | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/mgui/ffviewer.cpp b/src/mgui/ffviewer.cpp
index 1a536cb..c0677c2 100644
--- a/src/mgui/ffviewer.cpp
+++ b/src/mgui/ffviewer.cpp
@@ -633,12 +633,16 @@ FFInfo::~FFInfo()
     CloseInfo(*this);
 }
 
+#if LIBAVCODEC_VERSION_INT >= AV_VERSION_INT(57,5,00)
 static int bmd_avpicture_fill(AVFrame *picture, const uint8_t *ptr,
                               AVPixelFormat pix_fmt, int width, int height)
 {
     return av_image_fill_arrays(picture->data, picture->linesize,
                                 ptr, pix_fmt, width, height, 1);
 }
+#else
+#define bmd_avpicture_fill avpicture_fill
+#endif
 
 bool FFViewer::Open(const char* fname, std::string& err_str)
 {
-- 
2.7.4

